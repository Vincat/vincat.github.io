<!DOCTYPE html>
<html lang="en-au" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 5.24.1">
    <meta name="description" content="Documentation for my Homelab">
    <meta name="author" content="Vincent Cox">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Ubuntu Server :: My Homelab Notes">
    <meta name="twitter:description" content="Basics These are my basic set up to get the environment working the way I want.
NOTE: These servers are never exposed to the Internet directly.
Tested on Ubuntu server 22.04 LTS When it comes to servers, always run the LTS versions, unless you like doing constant rebuilds.
Install by whatever method you choose, there are plenty of install guides around, during the install make sure to enable sshd, as everything here is done remotely.">
    <meta property="og:title" content="Ubuntu Server :: My Homelab Notes">
    <meta property="og:description" content="Basics These are my basic set up to get the environment working the way I want.
NOTE: These servers are never exposed to the Internet directly.
Tested on Ubuntu server 22.04 LTS When it comes to servers, always run the LTS versions, unless you like doing constant rebuilds.
Install by whatever method you choose, there are plenty of install guides around, during the install make sure to enable sshd, as everything here is done remotely.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://vincat.github.io/homelab/ubuntu-server/index.html">
    <meta property="article:section" content="Homelab :: My Homelab Notes">
    <meta property="article:published_time" content="2024-03-03T21:51:41+10:00">
    <meta property="article:modified_time" content="2024-03-03T21:51:41+10:00">
    <meta property="og:site_name" content="My Homelab Notes">
    <title>Ubuntu Server :: My Homelab Notes</title><link rel="icon" href="/images/avater_vincent1.webp" type="image/webp" />


    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/css/fontawesome-all.min.css?1711677282" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1711677282" rel="stylesheet"></noscript>
    <link href="/css/nucleus.css?1711677282" rel="stylesheet">
    <link href="/css/auto-complete.css?1711677282" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1711677282" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1711677282" rel="stylesheet">
    <link href="/css/fonts.css?1711677282" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1711677282" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1711677282" rel="stylesheet">
    <link href="/css/theme-zen-dark.css?1711677282" rel="stylesheet" id="R-variant-style">
    <link href="/css/chroma-relearn-dark.css?1711677282" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/css/variant.css?1711677282" rel="stylesheet">
    <link href="/css/print.css?1711677282" rel="stylesheet" media="print">
    <link href="/css/ie.css?1711677282" rel="stylesheet">
    <script src="/js/url.js?1711677282"></script>
    <script src="/js/variant.js?1711677282"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      window.index_js_url="/index.search.js";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      window.relearn = window.relearn || {};
      window.relearn.baseUriFull='https:\/\/vincat.github.io/';
      // variant stuff
      window.relearn.themeVariantModifier='';
      window.variants && variants.init( [ 'zen-dark' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support html" data-url="/homelab/ubuntu-server/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"><nav class="TableOfContents">
  <ul>
    <li><a href="#basics">Basics</a></li>
    <li><a href="#tested-on-ubuntu-server-2204-lts">Tested on Ubuntu server 22.04 LTS</a></li>
    <li><a href="#change-password">Change Password</a></li>
    <li><a href="#check-and-set-hostname-time-and-date">Check and set hostname, Time and date</a></li>
    <li><a href="#ssh-keys">SSH Keys</a></li>
    <li><a href="#sudo">Sudo</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/index.html"><span itemprop="name">My Linux Documentation</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/homelab/index.html"><span itemprop="name">Homelab</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Ubuntu Server</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/homelab/index.html" title="Homelab (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/homelab/docker/index.html" title="Docker (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="/tags/server/index.html">Server</a></li>
    <li><a class="term-link" href="/tags/tutorial/index.html">Tutorial</a></li>
  </ul>
</div>
            </header>
<h1 id="ubuntu-server">Ubuntu Server</h1>

<h2 id="basics">Basics</h2>
<p>These are my basic set up to get the environment working the way I want.<br>
<strong>NOTE:</strong> These servers are never exposed to the Internet directly.</p>
<h2 id="tested-on-ubuntu-server-2204-lts">Tested on Ubuntu server 22.04 LTS</h2>
<p>When it comes to servers, always run the LTS versions, unless you like doing constant rebuilds.</p>
<p>Install by whatever method you choose, there are plenty of install guides around, during the install make sure to enable sshd, as everything here is done remotely.</p>
<h2 id="change-password">Change Password</h2>
<p>I do the initial set up with a simple password, mainly because I have no wifi, so during the install there is no Internet available. After the initial install is done, then I move the server to the server closet and connect a wired Ethernet cable to provide Internet connectivity.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>passwd shadow
</span></span><span style="display:flex;"><span>Changing password <span style="color:#66d9ef">for</span> shadow
</span></span><span style="display:flex;"><span>Current password: 
</span></span><span style="display:flex;"><span>New password: 
</span></span><span style="display:flex;"><span>Retype new password: 
</span></span><span style="display:flex;"><span>passwd: password updated successfully</span></span></code></pre></div><h2 id="check-and-set-hostname-time-and-date">Check and set hostname, Time and date</h2>
<p>Since this is a server, chances are that looking at logs etc it will be important to make sure the times are correct.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hostnamectl
</span></span><span style="display:flex;"><span>timedatectl 
</span></span><span style="display:flex;"><span>timedatectl list-timezones | grep Australia
</span></span><span style="display:flex;"><span>sudo timedatectl set-timezone Australia/*************
</span></span><span style="display:flex;"><span>timedatectl 
</span></span><span style="display:flex;"><span>               Local time: Fri 2023-11-17 14:46:55 AEST
</span></span><span style="display:flex;"><span>           Universal time: Fri 2023-11-17 04:46:55 UTC
</span></span><span style="display:flex;"><span>                 RTC time: Fri 2023-11-17 04:46:55
</span></span><span style="display:flex;"><span>                Time zone: Australia/***************
</span></span><span style="display:flex;"><span>System clock synchronized: yes
</span></span><span style="display:flex;"><span>              NTP service: active
</span></span><span style="display:flex;"><span>          RTC in local TZ: no</span></span></code></pre></div><h2 id="ssh-keys">SSH Keys</h2>
<p>Below is a list of commands to use a different ssh key for each server. Alternatively you could just use one ssh key for all servers.<br>
<strong>IMPORTANT</strong>  Give each key a unique name, or every time you generate a new key the old one will get overwritten.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh-keygen -t ed25519 -C <span style="color:#e6db74">&#34;Dell-Laptop&#34;</span>          // Generate key
</span></span><span style="display:flex;"><span>Enter file in which to save the key <span style="color:#f92672">(</span>/home/shadow/.ssh/id_ed25519<span style="color:#f92672">)</span>: /home/shadow/.ssh/galadriel        // Give unique name to key
</span></span><span style="display:flex;"><span>Enter passphrase <span style="color:#f92672">(</span>empty <span style="color:#66d9ef">for</span> no passphrase<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ssh-copy-id -i ~/.ssh/galadriel.pub galadriel               // Copy key to server</span></span></code></pre></div><h2 id="sudo">Sudo</h2>
<p>I don&rsquo;t like having to type long complicated passwords all the time, so I make the following changes.<br>
Always use <code>visudo</code> to edit file. Add the following line to the end of the file. Change <code>user_name</code> for your actual user name.</p>
<div class="wrap-code highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo visudo
</span></span><span style="display:flex;"><span>user_name ALL<span style="color:#f92672">=(</span>ALL<span style="color:#f92672">)</span> NOPASSWD:ALL  <span style="color:#75715e"># NO passwd</span></span></span></code></pre></div>
            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="/categories/server/index.html">Server</a></li>
    <li><a class="term-link" href="/categories/setup/index.html">Setup</a></li>
  </ul>
</div>
            </footer>
          </article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="/images/avater_vincent1.webp"> 


        </div>
        <div class="searchbox default-animation">
          <i class="fas fa-search" title="Search (CTRL+ALT+f)"></i>
          <label class="a11y-only" for="R-search-by">Search</label>
          <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
          <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
        </div>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1711677282" defer></script>
        <script src="/js/lunr/lunr.min.js?1711677282" defer></script>
        <script src="/js/lunr/lunr.stemmer.support.min.js?1711677282" defer></script>
        <script src="/js/lunr/lunr.multi.min.js?1711677282" defer></script>
        <script src="/js/lunr/lunr.en.min.js?1711677282" defer></script>
        <script src="/js/search.js?1711677282" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/index.html"><i class="fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-topics">
          <ul class="enlarge morespace collapsible-menu">
          <li data-nav-id="/basics/index.html" class=""><a class="padding" href="/basics/index.html">Hugo Basics</a><ul id="R-subsections-a6deabe447afe1b2e1405bfc57ca61ff" class="morespace collapsible-menu">
          <li data-nav-id="/basics/getting-started/index.html" class=""><a class="padding" href="/basics/getting-started/index.html">Getting Started</a></li>
          <li data-nav-id="/basics/content/index.html" class=""><a class="padding" href="/basics/content/index.html">Content</a></li></ul></li>
          <li data-nav-id="/homelab/index.html" class="parent "><a class="padding" href="/homelab/index.html">Homelab</a><ul id="R-subsections-2071b9714a1a340d5f4118a653904485" class="morespace collapsible-menu">
          <li data-nav-id="/homelab/ubuntu-server/index.html" class="active"><a class="padding" href="/homelab/ubuntu-server/index.html">Ubuntu Server</a></li>
          <li data-nav-id="/homelab/docker/index.html" class=""><a class="padding" href="/homelab/docker/index.html">Docker</a></li>
          <li data-nav-id="/homelab/lxd/index.html" class=""><a class="padding" href="/homelab/lxd/index.html">Lxd</a></li></ul></li>
          <li data-nav-id="/command-line/index.html" class=""><a class="padding" href="/command-line/index.html">Command Line</a></li>
          <li data-nav-id="/about/index.html" class=""><a class="padding" href="/about/index.html">About</a></li>
          </ul>
        </div>
        <div id="R-shortcuts">
          <div class="nav-title padding">More</div>
          <ul class="space">
            <li><a class="padding" href="/categories/index.html"><i class='fas fa-layer-group'></i> Categories</a></li>
            <li><a class="padding" href="/tags/index.html"><i class='fas fa-tags'></i> Tags</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fas fa-language fa-fw"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = baseUri + this.value;">
                      <option id="R-en" value="/homelab/ubuntu-server/index.html" lang="en-au" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fas fa-paint-brush fa-fw"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-zen-dark" value="zen-dark" selected>Zen Dark</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fas fa-history fa-fw"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter"> <p xmlns:cc="http://creativecommons.org/ns#" >This work is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p> 
 <br>
<p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

          </div>
        </div>
      </div>
    </aside>
    <script src="/js/clipboard.min.js?1711677282" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1711677282" defer></script>
    <script src="/js/theme.js?1711677282" defer></script>
  </body>
</html>
